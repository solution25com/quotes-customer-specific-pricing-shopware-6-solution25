<?xml version="1.0" ?>

<container xmlns="http://symfony.com/schema/dic/services"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:schemaLocation="http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd">

  <services>

    <!-- Event Subscribers -->
    <service id="S25Quotes\EventSubscriber\QuoteCustomerResponseSubscriber">
      <argument type="service" id="Shopware\Commercial\CustomPricing\Domain\CustomPriceUpdater" on-invalid="null"/>
      <argument type="service" id="order.repository"/>
      <argument type="service" id="product.repository"/>
      <tag name="kernel.event_subscriber"/>
    </service>

    <service id="S25Quotes\EventSubscriber\ProductPageSubscriber">
      <tag name="kernel.event_subscriber"/>
      <argument type="service" id="product.repository"/>
    </service>
    <!-- END Event Subscribers -->

        <service id="S25Quotes\Cart\PromotionProcessorDecorated"
                 decorates="Shopware\Core\Checkout\Promotion\Cart\PromotionProcessor">
          <argument type="service" id="Shopware\Core\Checkout\Promotion\Cart\PromotionCalculator"/>
          <argument type="service" id="Shopware\Core\Checkout\Cart\LineItem\Group\LineItemGroupBuilder"/>
          <argument type="service" id="custom_price.repository"/>
          <argument type="service" id="S25Quotes\Cart\PromotionProcessorDecorated.inner"/>
          <tag name="shopware.cart.processor" priority="4900"/>
<!--          <tag name="shopware.cart.processor" priority="-5500"/>-->

        </service>


    <service id="S25Quotes\Core\Rule\LineItemHasCustomPriceRule"
             class="S25Quotes\Core\Rule\LineItemHasCustomPriceRule">
      <tag name="shopware.rule.definition"/>
    </service>


  </services>
</container>